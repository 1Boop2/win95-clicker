BALANCE PATCH v3.3 ‚Äî –ù–ï–†–§ ¬´–ú—ã—à—å 95¬ª + —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ —É–ª—É—á—à–µ–Ω–∏–π –ø–æ –≤–æ–∑—Ä–∞—Å—Ç–∞–Ω–∏—é

–ß—Ç–æ –º–µ–Ω—è–µ—Ç—Å—è
------------
1) ¬´–ú—ã—à—å 95¬ª –±–æ–ª—å—à–µ –Ω–µ –∏–º–±–∞: +1 –∫–ª–∏–∫ –∑–∞ –Ω–∞–∂–∞—Ç–∏–µ –∑–∞ —É—Ä–æ–≤–µ–Ω—å, —Ä–æ—Å—Ç —Ü–µ–Ω—ã 1.18, –º–∞–∫—Å–∏–º—É–º 30 —É—Ä–æ–≤–Ω–µ–π.
2) –í—Å–µ —É–ª—É—á—à–µ–Ω–∏—è –∏–¥—É—Ç –õ–ï–°–¢–ù–ò–¶–ï–ô (–ø–æ –≤–æ–∑—Ä–∞—Å—Ç–∞–Ω–∏—é —Ü–µ–Ω—ã —Å–ª–µ–¥—É—é—â–µ–≥–æ —É—Ä–æ–≤–Ω—è).
3) –î–æ–±–∞–≤–ª–µ–Ω –∞–∫–∫—É—Ä–∞—Ç–Ω—ã–π –ø—Ä–æ–≥—Ä–µ—Å—Å –æ—Ç –ø—Ä–æ—Å—Ç—ã—Ö –∫–ª–∏–∫–æ–≤—ã—Ö –∞–¥–¥–∏—Ç–∏–≤–Ω—ã—Ö –∫ –º—É–ª—å—Ç–∏–ø–ª–∏–∫–∞—Ç–∏–≤–Ω—ã–º –∏ –∞–≤—Ç–æ–∫–ª–∏–∫–µ—Ä–∞–º.

–ë—ã—Å—Ç—Ä—ã–π –ø—É—Ç—å (—Ñ–∞–π–ª–æ–≤—ã–π)
-----------------------
A. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ `inc/shop_defs.php` –≤ –≤–∞—à –ø—Ä–æ–µ–∫—Ç –∏ –ø–æ–¥–∫–ª—é—á–∏—Ç–µ –µ–≥–æ –≤ `inc/lib.php`:
   –î–æ–±–∞–≤—å—Ç–µ –≥–¥–µ-–Ω–∏–±—É–¥—å –≤–≤–µ—Ä—Ö—É lib.php:
     require_once __DIR__ . '/shop_defs.php';

   –ê –≤ —Ñ—É–Ω–∫—Ü–∏–∏, –∫–æ—Ç–æ—Ä–∞—è –¥–∞—ë—Ç –¥–µ—Ñ–∏–Ω–∏—Ü–∏–∏ –º–∞–≥–∞–∑–∏–Ω–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä `shop_definitions()` –∏–ª–∏
   `get_shop_defs()`), –≤–µ—Ä–Ω–∏—Ç–µ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ —ç—Ç–æ–≥–æ —Ñ–∞–π–ª–∞:
     function shop_definitions(): array {
       $defs = require __DIR__ . '/shop_defs.php';
       return $defs;
     }

   –ï—Å–ª–∏ —É –≤–∞—Å —É–∂–µ –µ—Å—Ç—å —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è, –ø—Ä–æ—Å—Ç–æ –û–ë–ù–û–í–ò–¢–ï –µ—ë —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ –∑–Ω–∞—á–µ–Ω–∏—è–º–∏ –∏–∑ shop_defs.php.

B. –ù–∞ –±—ç–∫–µ–Ω–¥–µ, –ø–µ—Ä–µ–¥ —Ç–µ–º –∫–∞–∫ –æ—Ç–¥–∞–≤–∞—Ç—å —Å–ø–∏—Å–æ–∫ –º–∞–≥–∞–∑–∏–Ω–∞ –≤ JSON, –æ—Ç—Å–æ—Ä—Ç–∏—Ä—É–π—Ç–µ –ø–æ —Ü–µ–Ω–µ.
   –í—Å—Ç–∞–≤—å—Ç–µ –∫–æ–¥ –∏–∑ `public/api/_fragments/sort_upgrades_backend.php` —Ç–∞–º, –≥–¥–µ —É –≤–∞—Å —É–∂–µ
   —Å–æ–±—Ä–∞–Ω –º–∞—Å—Å–∏–≤ `$shop` —Å –∫–ª—é—á–æ–º `next_cost` (—Ü–µ–Ω–∞ —Å–ª–µ–¥—É—é—â–µ–≥–æ —É—Ä–æ–≤–Ω—è).

C. –ù–∞ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–µ (–Ω–∞ –≤—Å—è–∫–∏–π —Å–ª—É—á–∞–π, —á—Ç–æ–±—ã –ø–æ—Ä—è–¥–æ–∫ –≤—Å–µ–≥–¥–∞ –±—ã–ª –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π),
   –ø–µ—Ä–µ–¥ —Ä–µ–Ω–¥–µ—Ä–æ–º —Å–ø–∏—Å–∫–∞ –≤—ã–∑–æ–≤–∏—Ç–µ —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫—É:
     —Å–º. `public/assets/_fragments/sort_upgrades_frontend.js`

SQL-–≤–∞—Ä–∏–∞–Ω—Ç (–µ—Å–ª–∏ —É –≤–∞—Å –º–∞–≥–∞–∑–∏–Ω –≤ –ë–î)
-------------------------------------
–ï—Å–ª–∏ defs –∂–∏–≤—É—Ç –≤ —Ç–∞–±–ª–∏—Ü–µ (–Ω–∞–ø—Ä–∏–º–µ—Ä `shop_defs`), –≤—ã–ø–æ–ª–Ω–∏—Ç–µ upsert –ø–æ –Ω—É–∂–Ω—ã–º –∫–æ–ª–æ–Ω–∫–∞–º:
  code, name, desc/description, icon, kind, add (–∏–ª–∏ add_click), cps, mult, base_cost, growth, max

–ü—Ä–∏–º–µ—Ä (–ø–µ—Ä–µ–∏–º–µ–Ω—É–π—Ç–µ –ø–æ–ª—è –ø–æ–¥ –≤–∞—à—É —Å—Ö–µ–º—É):

  INSERT INTO shop_defs
    (code,name,description,icon,kind,add_click,cps,mult,base_cost,growth,max_level)
  VALUES
    ('mouse95','–ú—ã—à—å 95','–®–∞—Ä–∏–∫–æ–≤–∞—è –º—ã—à—å. +1 –∫–ª–∏–∫/–Ω–∞–∂–∞—Ç–∏–µ –∑–∞ —É—Ä–æ–≤–µ–Ω—å. (–ù–ï–†–§)','üñ±Ô∏è','click_add',1.0,NULL,NULL,50,1.18,30)
  ON DUPLICATE KEY UPDATE
    description=VALUES(description), add_click=VALUES(add_click),
    base_cost=VALUES(base_cost), growth=VALUES(growth), max_level=VALUES(max_level);

–ò –∞–Ω–∞–ª–æ–≥–∏—á–Ω–æ ‚Äî –¥–ª—è –æ—Å—Ç–∞–ª—å–Ω—ã—Ö –∫–æ–¥–æ–≤ –∏–∑ `inc/shop_defs.php`.
–ó–∞—Ç–µ–º –Ω–∞ –±—ç–∫–µ–Ω–¥–µ –æ—Ç—Å–æ—Ä—Ç–∏—Ä—É–π—Ç–µ —Å–ø–∏—Å–æ–∫ –ø–µ—Ä–µ–¥ JSON (—Å–º. —Ñ—Ä–∞–≥–º–µ–Ω—Ç —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∏).

–§–æ—Ä–º—É–ª—ã (–¥–ª—è —Å–ø—Ä–∞–≤–∫–∏)
---------------------
- –°—Ç–æ–∏–º–æ—Å—Ç—å —Å–ª–µ–¥—É—é—â–µ–≥–æ —É—Ä–æ–≤–Ω—è:  next_cost = ceil(base_cost * pow(growth, level))
- –°—É–º–º–∞—Ä–Ω–∞—è —Å–∏–ª–∞ –∫–ª–∏–∫–∞:
    click = base(=1) + Œ£(level(code)*add)  ‚Üí –ø–æ—Ç–æ–º √ó Œ†(mult^level)
- –ê–≤—Ç–æ–∫–ª–∏–∫: cps = Œ£(level(code)*cps)

–¢–æ—á–∫–∏ –∫–æ–Ω—Ç—Ä–æ–ª—è
--------------
1) –í –º–∞–≥–∞–∑–∏–Ω–µ ¬´–ú—ã—à—å 95¬ª –¥–æ–ª–∂–Ω–∞ —Å—Ç–æ—è—Ç—å –ø–æ—Å–ª–µ MousePad 95 –∏ –¥–æ Double-Click 95.
2) –£—Ä–æ–≤–Ω–∏ ¬´–ú—ã—à—å 95¬ª –Ω–µ –¥–æ–ª–∂–Ω—ã –ø—Ä–µ–≤—ã—à–∞—Ç—å 30.
3) –°–ø–∏—Å–æ–∫ —É–ª—É—á—à–µ–Ω–∏–π —Ä–∞—Å—Ç—ë—Ç –ø–æ —Ü–µ–Ω–µ (–±–µ–∑ –ø—Ä—ã–∂–∫–æ–≤ –Ω–∞–∑–∞–¥).
4) –ï—Å–ª–∏ –Ω–∞ —Ñ—Ä–æ–Ω—Ç–µ –µ—Å—Ç—å –ø–æ–∏—Å–∫/—Ñ–∏–ª—å—Ç—Ä ‚Äî —Å–æ—Ä—Ç–∏—Ä—É–π—Ç–µ –ø–æ—Å–ª–µ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏.

–ó–∞–º–µ—Ç–∫–∞
-------
–ï—Å–ª–∏ —É –≤–∞—Å –≥–¥–µ-—Ç–æ –≤ –∫–æ–¥–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª–æ—Å—å –∏–º—è –ø–æ–ª—è `desc` –¥–ª—è –æ–ø–∏—Å–∞–Ω–∏—è ‚Äî –ø–µ—Ä–µ–∏–º–µ–Ω—É–π—Ç–µ –≤
`description` –∏–ª–∏ —ç–∫—Ä–∞–Ω–∏—Ä—É–π—Ç–µ (MySQL: \`desc\`). –í —Ä–∞–Ω–Ω–∏—Ö –≤–µ—Ä—Å–∏—è—Ö —ç—Ç–æ –ø—Ä–∏–≤–æ–¥–∏–ª–æ –∫ –æ—à–∏–±–∫–µ 1064.
